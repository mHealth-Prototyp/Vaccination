import{d as P,u as V,r as m,w as b,am as w,S as s,U as _,V as z,a2 as e,Z as l,j as g,X as d,an as I,a3 as v,a4 as y,f as R,a5 as N,ao as S,ac as h}from"./index.ed4a376f.js";import{Q as x}from"./QPage.85d804ed.js";import{u as B}from"./composables.9943da83.js";import{u as D}from"./vue-i18n.runtime.1f62da51.js";const L={key:0},M={key:0},Q={key:1,class:"error-message"},U={key:2,class:"no-document"},j={key:3,class:"document-select"},C=y("hr",null,null,-1),q=P({__name:"ImmunizationPage",setup(F){const t=V(),f=B(),{t:o,locale:p}=D();let c=m(!1),u=m(!1),n=m(t.selectedMetadata);b(n,a=>{u.value=!1,a&&(c.value=!0,w(a,f,t).catch(()=>u.value=!0).finally(()=>c.value=!1))});function k(a,i=!1){return a.date?o("immunizationPage.selectLabel")+new Intl.DateTimeFormat(p.value).format(new Date(a.date))+(a.description&&i?": "+a.description:""):"? "+(a.description&&i?" - "+a.description:a.id)}return(a,i)=>(s(),_(x,{class:"full-width row justify-center content-start"},{default:z(()=>[!e(c)&&e(t).vaccinationRecord?(s(),l("div",L,[e(u)?(s(),l("p",Q,d(e(o)("common.error")),1)):(s(),l("div",M,[g(e(S),{document:e(t).vaccinationRecord,"fhir-utils":e(f).fhirUtils,"language-string":e(p),"is-mobile":!1},null,8,["document","fhir-utils","language-string"])]))])):e(c)?(s(),_(I,{key:1,indeterminate:""})):e(t).userIsLogged?(s(),l("p",U,d(e(o)("immunizationPage.noRecord",{name:e(h.getFullName)(e(h.selectName)(e(t).userResource.name))})),1)):v("",!0),e(t).vaccinationMetadata.length>1?(s(),l("div",j,[C,y("p",null,d(e(o)("immunizationPage.multipleDocuments")),1),g(N,{modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=r=>R(n)?n.value=r:n=r),class:"selector",options:e(t).vaccinationMetadata,"option-label":r=>k(r,!0),label:e(o)("immunizationPage.selectTitle")},null,8,["modelValue","options","option-label","label"])])):v("",!0)]),_:1}))}});export{q as default};
